<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Novel List</title>
    <!-- 引入 Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/5.0.0-alpha1/css/bootstrap.min.css">
    <!-- 引入自定义 CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <div class="container">
        <h1 class="my-4">Novels</h1>
        
        <p class="alert alert-info">小說設定</p>

        <!-- 篩選功能 -->
        <form action="/" method="post" id="myForm">
            <div class="form-check">
                <input class="form-check-input" type="checkbox" id="selectAllOptions">
                <label class="form-check-label" for="selectAllOptions">全選</label>
            </div>        
            <div class="row">
                <div class="col-md-2">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="option1" id="option1" {{ 'checked' if form_values['option1'] }}>
                        <label class="form-check-label" for="option1">哨向</label>
                    </div>
                </div>
                <div class="col-md-2">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="option2" id="option2" {{ 'checked' if form_values['option2'] }}>
                        <label class="form-check-label" for="option2">高智商</label>
                    </div>
                </div>
                <div class="col-md-2">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="option3" id="option3" {{ 'checked' if form_values['option3'] }}>
                        <label class="form-check-label" for="option3">職場</label>
                    </div>
                </div>
                <div class="col-md-2">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="option4" id="option4" {{ 'checked' if form_values['option4'] }}>
                        <label class="form-check-label" for="option4">BE</label>
                    </div>
                </div>
                <div class="col-md-2">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="option5" id="option5" {{ 'checked' if form_values['option5'] }}>
                        <label class="form-check-label" for="option5">論壇體</label>
                    </div>
                </div>
                <div class="col-md-2">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="option6" id="option6" {{ 'checked' if form_values['option6'] }}>
                        <label class="form-check-label" for="option6">性別轉換</label>
                    </div>
                </div>
                <div class="col-md-2">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="option7" id="option7" {{ 'checked' if form_values['option7'] }}>
                        <label class="form-check-label" for="option7">虐文</label>
                    </div>
                </div>
                <div class="col-md-2">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="option8" id="option8" {{ 'checked' if form_values['option8'] }}>
                        <label class="form-check-label" for="option8">替身</label>
                    </div>
                </div>
                <div class="col-md-2">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="option9" id="option9" {{ 'checked' if form_values['option9'] }}>
                        <label class="form-check-label" for="option9">近代現代</label>
                    </div>
                </div>
                <div class="col-md-2">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="option10" id="option10" {{ 'checked' if form_values['option10'] }}>
                        <label class="form-check-label" for="option10">古色古香</label>
                    </div>
                </div>
                <div class="col-md-2">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="option11" id="option11" {{ 'checked' if form_values['option11'] }}>
                        <label class="form-check-label" for="option11">架空歷史</label>
                    </div>
                </div>
                <div class="col-md-2">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="option12" id="option12" {{ 'checked' if form_values['option12'] }}>
                        <label class="form-check-label" for="option12">幻想未來</label>
                    </div>
                </div>
                <div class="col-md-2">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="option13" id="option13" {{ 'checked' if form_values['option13'] }}>
                        <label class="form-check-label" for="option13">愛情</label>
                    </div>
                </div>
                <div class="col-md-2">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="option14" id="option14" {{ 'checked' if form_values['option14'] }}>
                        <label class="form-check-label" for="option14">武俠</label>
                    </div>
                </div>
                <div class="col-md-2">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="option15" id="option15" {{ 'checked' if form_values['option15'] }}>
                        <label class="form-check-label" for="option15">奇幻</label>
                    </div>
                </div>
                <div class="col-md-2">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="option16" id="option16" {{ 'checked' if form_values['option16'] }}>
                        <label class="form-check-label" for="option16">仙俠</label>
                    </div>
                </div>
                <div class="col-md-2">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="option17" id="option17" {{ 'checked' if form_values['option17'] }}>
                        <label class="form-check-label" for="option17">遊戲</label>
                    </div>
                </div>
                <div class="col-md-2">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="option18" id="option18" {{ 'checked' if form_values['option18'] }}>
                        <label class="form-check-label" for="option18">科幻</label>
                    </div>
                </div>
                <div class="col-md-2">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="option19" id="option19" {{ 'checked' if form_values['option19'] }}>
                        <label class="form-check-label" for="option19">甜文</label>
                    </div>
                </div>
                <div class="col-md-2">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="option20" id="option20" {{ 'checked' if form_values['option20'] }}>
                        <label class="form-check-label" for="option20">爽文</label>
                    </div>
                </div>
                <div class="col-md-2">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="option21" id="option21" {{ 'checked' if form_values['option21'] }}>
                        <label class="form-check-label" for="option21">情有獨鍾</label>
                    </div>
                </div>
                <div class="col-md-2">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="option22" id="option22" {{ 'checked' if form_values['option22'] }}>
                        <label class="form-check-label" for="option22">穿越時空</label>
                    </div>
                </div>
                <div class="col-md-2">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="option23" id="option23" {{ 'checked' if form_values['option23'] }}>
                        <label class="form-check-label" for="option23">穿書</label>
                    </div>
                </div>
                <div class="col-md-2">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="option24" id="option24" {{ 'checked' if form_values['option24'] }}>
                        <label class="form-check-label" for="option24">豪門世家</label>
                    </div>
                </div>
                <div class="col-md-2">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="option25" id="option25" {{ 'checked' if form_values['option25'] }}>
                        <label class="form-check-label" for="option25">強強</label>
                    </div>
                </div>
                <div class="col-md-2">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="option26" id="option26" {{ 'checked' if form_values['option26'] }}>
                        <label class="form-check-label" for="option26">系統</label>
                    </div>
                </div>
                <div class="col-md-2">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="option27" id="option27" {{ 'checked' if form_values['option27'] }}>
                        <label class="form-check-label" for="option27">重生</label>
                    </div>
                </div>
                <div class="col-md-2">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="option28" id="option28" {{ 'checked' if form_values['option28'] }}>
                        <label class="form-check-label" for="option28">娛樂圈</label>
                    </div>
                </div>
                <div class="col-md-2">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="option29" id="option29" {{ 'checked' if form_values['option29'] }}>
                        <label class="form-check-label" for="option29">都市</label>
                    </div>
                </div>
                <div class="col-md-2">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="option30" id="option30" {{ 'checked' if form_values['option30'] }}>
                        <label class="form-check-label" for="option30">破鏡重圓</label>
                    </div>
                </div>
                <div class="col-md-2">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="option31" id="option31" {{ 'checked' if form_values['option31'] }}>
                        <label class="form-check-label" for="option31">先婚後愛</label>
                    </div>
                </div>
                <div class="col-md-2">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="option32" id="option32" {{ 'checked' if form_values['option32'] }}>
                        <label class="form-check-label" for="option32">逆襲</label>
                    </div>
                </div>
                <div class="col-md-2">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="option33" id="option33" {{ 'checked' if form_values['option33'] }}>
                        <label class="form-check-label" for="option33">日常</label>
                    </div>
                </div>
                <div class="col-md-2">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="option34" id="option34" {{ 'checked' if form_values['option34'] }}>
                        <label class="form-check-label" for="option34">校園</label>
                    </div>
                </div>
                <div class="col-md-2">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="option35" id="option35" {{ 'checked' if form_values['option35'] }}>
                        <label class="form-check-label" for="option35">ABO</label>
                    </div>
                </div>
                <div class="col-md-2">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="option36" id="option36" {{ 'checked' if form_values['option36'] }}>
                        <label class="form-check-label" for="option36">年下</label>
                    </div>
                </div>
                <div class="col-md-2">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="option37" id="option37" {{ 'checked' if form_values['option37'] }}>
                        <label class="form-check-label" for="option37">追愛火葬場</label>
                    </div>
                </div>
                <div class="col-md-2">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="option38" id="option38" {{ 'checked' if form_values['option38'] }}>
                        <label class="form-check-label" for="option38">末世</label>
                    </div>
                </div>
                <div class="col-md-2">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="option39" id="option39" {{ 'checked' if form_values['option39'] }}>
                        <label class="form-check-label" for="option39">群像</label>
                    </div>
                </div>
                <div class="col-md-2">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="option40" id="option40" {{ 'checked' if form_values['option40'] }}>
                        <label class="form-check-label" for="option40">驚悚</label>
                    </div>
                </div>
                <div class="col-md-2">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="option41" id="option41" {{ 'checked' if form_values['option41'] }}>
                        <label class="form-check-label" for="option41">懸疑</label>
                    </div>
                </div>
                <div class="col-md-2">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="option42" id="option42" {{ 'checked' if form_values['option42'] }}>
                        <label class="form-check-label" for="option42">劇情</label>
                    </div>
                </div>
                <div class="col-md-2">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="option43" id="option43" {{ 'checked' if form_values['option43'] }}>
                        <label class="form-check-label" for="option43">輕小說</label>
                    </div>
                </div>
                <div class="col-md-2">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="option44" id="option44" {{ 'checked' if form_values['option44'] }}>
                        <label class="form-check-label" for="option44">正劇</label>
                    </div>
                </div>
                <div class="col-md-2">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="option45" id="option45" {{ 'checked' if form_values['option45'] }}>
                        <label class="form-check-label" for="option45">HE</label>
                    </div>
                </div>
                <div class="col-md-2">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="option46" id="option46" {{ 'checked' if form_values['option46'] }}>
                        <label class="form-check-label" for="option46">現代架空</label>
                    </div>
                </div>
                <div class="col-md-2">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="option47" id="option47" {{ 'checked' if form_values['option47'] }}>
                        <label class="form-check-label" for="option47">救贖</label>
                    </div>
                </div>
                <div class="col-md-2">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="option48" id="option48" {{ 'checked' if form_values['option48'] }}>
                        <label class="form-check-label" for="option48">青梅竹馬</label>
                    </div>
                </div>
                <div class="col-md-2">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="option49" id="option49" {{ 'checked' if form_values['option49'] }}>
                        <label class="form-check-label" for="option49">暗戀</label>
                    </div>
                </div>
                <div class="col-md-2">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="option50" id="option50" {{ 'checked' if form_values['option50'] }}>
                        <label class="form-check-label" for="option50">治癒</label>
                    </div>
                </div>
                <div class="col-md-2">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="option51" id="option51" {{ 'checked' if form_values['option51'] }}>
                        <label class="form-check-label" for="option51">宮鬥</label>
                    </div>
                </div>
            </div>

            <p class="alert alert-info">字數上限</p>

            <!-- 拉霸 -->
            <div class="row my-3">
                <div class="col">
                    <label for="rangeFilter" class="form-label">篩選範圍（上限）:</label>
                    <input type="range" class="form-range" name="rangeFilter" id="rangeFilter" min="0" max="20000000" value="{{ form_values['range_value'] }}" oninput="updateRangeValue(this.value)">
                    <span id="rangeValue">{{ form_values['range_value'] }}</span>
                    <input type="hidden" name="rangeValue" id="hiddenRangeValue" value="{{ form_values['range_value'] }}">
                </div>
            </div>

            <p class="alert alert-info">性向</p>

            <!-- 性向 -->
            <div class="form-check">
                <input class="form-check-input" type="checkbox" id="selectAllSexual">
                <label class="form-check-label" for="selectAllSexual">全選</label>
            </div>        
            <div class="row">
                <div class="col-md-2">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="sexual1" id="sexual1" {{ 'checked' if form_values['sexual1'] }}>
                        <label class="form-check-label" for="sexual1">言情</label>
                    </div>
                </div>
                <div class="col-md-2">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="sexual2" id="sexual2" {{ 'checked' if form_values['sexual2'] }}>
                        <label class="form-check-label" for="sexual2">純愛</label>
                    </div>
                </div>
                <div class="col-md-2">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="sexual3" id="sexual3" {{ 'checked' if form_values['sexual3'] }}>
                        <label class="form-check-label" for="sexual3">百合</label>
                    </div>
                </div>
                <div class="col-md-2">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="sexual4" id="sexual4" {{ 'checked' if form_values['sexual4'] }}>
                        <label class="form-check-label" for="sexual4">女尊</label>
                    </div>
                </div>
                <div class="col-md-2">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="sexual5" id="sexual5" {{ 'checked' if form_values['sexual5'] }}>
                        <label class="form-check-label" for="sexual5">無cp</label>
                    </div>
                </div>
            </div>

            <p class="alert alert-info">小說狀態</p>

            <!-- 完結 -->
            <div class="form-check">
                <input class="form-check-input" type="checkbox" id="selectAllend">
                <label class="form-check-label" for="selectAllend">全選</label>
            </div>        
            <div class="row">
                <div class="col-md-2">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="end1" id="end1" {{ 'checked' if form_values['end1'] }}>
                        <label class="form-check-label" for="end1">完結</label>
                    </div>
                </div>
                <div class="col-md-2">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="end2" id="end2" {{ 'checked' if form_values['end2'] }}>
                        <label class="form-check-label" for="end2">連載</label>
                    </div>
                </div>
                <div class="col-md-2">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="end3" id="end3" {{ 'checked' if form_values['end3'] }}>
                        <label class="form-check-label" for="end3">暫停</label>
                    </div>
                </div>
            </div>

            <!-- 確認按鍵 -->
            <div class="row my-3">
                <div class="col">
                    <button type="submit" class="btn btn-primary">篩選</button>
                </div>
            </div>
        </form>
        <div id="warning" style="color: red; display: none;">至少選擇一個選項</div>

        <!-- results -->
        {% if results %}
            <!-- 显示查询结果 -->
            <table class="table" style="border-collapse: collapse; width: 100%;">
                <thead>
                    <tr>
                        <th style="border: 1px solid #91a8d0;">作者</th>
                        <th style="border: 1px solid #91a8d0;">小說</th>
                        <th style="border: 1px solid #91a8d0;">狀態</th>
                        <th style="border: 1px solid #91a8d0;">字數</th>
                        <th style="border: 1px solid #91a8d0;">積分</th>
                        <th style="border: 1px solid #91a8d0;">日期</th>
                        <th style="border: 1px solid #91a8d0;">介紹</th>
                        <th style="border: 1px solid #91a8d0;">設定</th>
                        <!-- 根据您的数据结构添加更多列 -->
                    </tr>
                </thead>
                <tbody>
                    {% for row in results %}
                    <tr>
                        <td style="border: 1px solid #91a8d0;">
                            <a href= "https://www.jjwxc.net/{{ row[8] }}" target="_blank">{{ row[0] }}</a>
                        </td>
                        <td style="border: 1px solid #91a8d0;">
                            <a href= "https://www.jjwxc.net/{{ row[9] }}" target="_blank">{{ row[1] }}</a>
                        </td>
                        <td style="border: 1px solid #91a8d0;">
                            {{ row[3] }}</a>
                        </td>
                        <td style="border: 1px solid #91a8d0;">
                            {{ row[4] }}</a>
                        </td>
                        <td style="border: 1px solid #91a8d0;">
                            {{ row[5] }}</a>
                        </td>
                        <td style="border: 1px solid #91a8d0;">
                            {{ row[6] }}</a>
                        </td>
                        <td style="border: 1px solid #91a8d0;">
                            {{ row[7].split("：")[1].split("標")[0] }}</a>
                        </td>
                        <td style="border: 1px solid #91a8d0;">
                            {{ row[7].split("：")[2] }}</a>
                        </td>
                        <!-- 根据您的数据结构填充行 -->
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
            <!-- 顯示分頁 -->
            <div class="pagination">
                {{ pagination.links }}
            </div>
            <!-- JavaScript 設定現在的分頁 -->
            <script>
                document.addEventListener("DOMContentLoaded", function() {
                    var currentPage = parseInt("{{ pagination.page }}");
                    sessionStorage.setItem('currentPage', currentPage);
                });
            </script>
        {% endif %}

        <!-- 引用 static/images 目錄下的圖片 -->
        <img src="{{ url_for('static', filename='images/yjt_monk.jpg') }}" alt="Monkey Image" class="img-fluid my-3">
    </div>

    <!-- 引入 Bootstrap JavaScript 和依賴項 -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/5.0.0-alpha1/js/bootstrap.bundle.min.js"></script>
    <!-- 引入自定义 JavaScript -->
    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
</body>
</html>
